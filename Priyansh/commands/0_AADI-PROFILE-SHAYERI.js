module.exports.config = {
    name: "shayri",
    version: "1.0.0",
    hasPermssion: 0,
    credits: "AADI BABU",
    description: "THIS BOT WAS MADE BY MR AADI BABU",
    commandCategory: "SHAYRI PROFILE",
    cooldowns: 0
};

module.exports.run = async function({ event, api, args, client, Currencies, Users, utils, __GLOBAL, reminder }) {
    const fs = global.nodemodule["fs-extra"];
    const request = global.nodemodule["request"];
    const axios = global.nodemodule['axios'];
    
    // Shayari ka array
    const shayariList = ["ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ð”ðƒðšðšð’ ð‡ð® ððšð‘ ð“ð®ð‰ð¡ð’ðž ððšð‘ðšð™ ððšð‡ð¢ ð“ðžð‘ðž ððšð’ð¬ ððšð‡ð¢ ð‰ð¡ð¨ð¨ð“ ðŠðšð‡ð® ð“ð¨ ð¬ð ðŠð®ðœð‡ ð‡ ðŒðžð‘ðž ððšð’ð’ ðŽð« ð’ðšðœð‡ ðŠðšð‡ðš ð“ð¨ ð“ðžð‘ðž ð’ð¢ð–ðš ðŠð®ð‚ð¡ ðŠð‡ðšðšð’ ððšð‡ð¢",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ð–ð¨ð‡ ðŠð¡ð®ð’ð¡ ð‡ð€ð¢ ððšð‘ ð’ð¡ðšð˜ðšð ð‡ð®ðŒ ð’ðž ððšð‡ð¢ ð–ð¨ð‡ ððšð‘ðšð‰ ð‡ðšð¢ ððšð‘ ð’ð¡ðšð˜ðšð ð‡ð®ðŒ ð’ðž ððšð‡ð¢ ðŠð¨ð ðŠðžð‡ðšð“ðš ð‡ðšð¢ ðŠðž ð”ð§ðŠðž ðƒð¢ð¥ð¥ ðŒðž ðŒð¨ð‡ð¨ððšðšð“ ððšð‡ð¢ ðŒð¨ð‡ð¨ððšðšð“ ð‡ðšð¢ ððšð‘ ð’ð¡ðšð˜ðšð ð‡ð®ðŒ ð’ðž ððšð¡ð¢ ",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ðŒð®ð£ð¡ðŠð¨ ð€ð¢ð’ðš ðƒðšð«ðƒ ðŒð¢ð‹ðš ð‰ð¢ð¬ðŠð¢ ðƒðšð–ð€ ððšð‡ð¢ ððšð¢ð‘ ðð¡ð¢ ðŠð¡ð®ð’ð¡ ð‡ð®ð ðŒð®ð£ð‡ðž ð”ð¬ ð’ðž ðŠð¨ðˆ ð†ð¢ð¥ð€ ððšð‡ð¢ ð€ð®ð‘ ðŠð¢ð“ð§ð„ ð€ðšð§ð’ð® ððšð‡ðšð”ð§ ð€ð› ð”ð¬ ðŠðž ð‹ð¢ð˜ðš ð‰ð¢ð¬ðŠð¨ ðŠð¡ð”ððš ððž ðŒðžð‘ðž ððšð¬ð„ð„ð› ðŒðšðˆð§ ð‹ð¢ð¤ð‡ðš ð‡ð¢ððšð‡ð¢",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ðŠð¢ð“ððš ðð²ðšðšð‘ðš ð‡ðšð¢ ð–ð¨ ð’ð¡ð€ðªð’ ð‰ð¨ ðŒðžð‘ð¢ ð‡ðšð‘ ð™ð®ððšðšð ððž ð’ð¡ðšðŒð¢ð‹ ð‡ðšð¢ ð˜ðž ðŠðšðˆð¬ðš ðˆð¬ð‡ðª ðŒðšð¢ ðŒðžð‘ðš ð‰ð¨ ð€ðð‡ð®ð‘ðš ð‡ð¨ðŠðž ðð¡ð¢ ðŠðšðšðŒð¢ð¥ ð‡ðšð¢",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ð“ðžð‘ð¢ ðŠðšðšðŒð˜ðšðð¢ ððšð‘ ð“ðšð‘ðžðžð… ð“ðžð‘ð¢ ðŠð¨ð’ð‡ð¢ð’ð¡ ðð« ð“ðšðšððš ð‡ð¨ð ðš ð“ðžð‘ðž ðƒð®ð¤ð‡ ðŒðž ðŠð®ð‚ð¡ ð‹ð¨ð† ð“ðžð‘ðž ð’ð®ðŠð¡ ðŒðž ð™ðšðŒðšðšððš ð‡ð¨ð†ðš",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ððšðš ð‘ðšð¬ð“ð¨ð ððž ð’ðšðšð“ð¡ ðƒð¢ð˜ðš ððš ðŒðšð§ð™ð¢ð¥ ððž ðˆð§ð“ðžð™ðšðšð‘ ðŠð¢ð˜ðš ðŒðžð¢ð ðŠð²ð€ ð¥ð¢ðŠð‡ð® ð€ð©ðð¢ ð™ð¢ð§ðƒðšð†ð¢ ððšð‘ ðŒðžð‘ðž ð’ðšðšð“ð¡ ð“ð¨ ð”ð¦ðžðžðƒð¨ð§ ððž ðð¡ðˆ ðŒðšð™ðšðšðŠ ðŠð¢ð˜ðš",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ðŠðšðˆð¬ðš ðƒð¢ð¤ð‡ð“ðš ð‡ð® ðŠðšðˆð’ðš ð‹ðšð†ð“ðš ð‡ð® ðŠð²ð€ ð…ðšð‘ðª ððšð‘ð“ðš ð‡ðšðˆ ð“ðžð‘ðž ððšðƒ ðŠð¢ð’ð¢ ðŠð¨ ð€ðšðœð‡ðš ð‹ðšð ððš ðð¡ðˆ ðŒð®ð£ð‡ðž ð€ðšðœð‡ðš ððšð‡ð¢ ð‹ðšð ð“ðš",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ððš ð‰ðšðšððž ðŠð¢ð’ ð“ðšð‘ðšð‡ ðŠðš ðˆð¬ð‡ðª ðŠðšð‘ ð‘ðžð‡ðž ð‡ðšðˆð§ ð‡ð®ðŒ ð‰ð¢ð’ð¤ð„ ð‡ð¨ ððšð‡ð¢ ð’ðšðŠð­ð„ ð”ð¬ ð‡ð¢ ðŠðž ð‡ð¢ ðŠðž ð‡ð¨ ð‘ðžð¡ð„ ð‡ðšðˆ ð‡ð®ðŒ",
                         "ð“ðžð‘ð¢ ð‚ð¡ðšð‡ðšð“ ðŒðžð¢ð ð¢ð“ð§ðš ð‚ð¡ðšð‡ð§ð„ ð“ð‡ð¢ ðŠð¢ ððšð¢ð‘ ðŠð¢ð’ð¢ ð‚ð¡ðšð‡ð§ð„ ðŠð¢ ð‚ð¡ðšð‡ðšð“ ðŠð¢ ð‚ð¡ðšð‡ðšð“ ððš ð‘ðžð‡ð¢",
                         "ð™ð¢ð§ðƒðšð†ð¢ ðŒðžð¢ð§ ð€ð ðšð‘ ðŠð®ðœð‡ ðð®ð‘ðš ð‡ð¨ ð“ð¨ð‡ ð’ðšððšð‘ ð‘ðšðŠð¡ðŽ ðŠð²ð”ð§ðŠð¢ ð‘ð¨ð¨ ðŠðšð‘ ð…ð¢ð‘ ð‡ðšð’ð§ð„ ðŠðš ðŒðšð™ðš ð‡ð¢ ðšð¥ð€ð  ð‡ð¨ð“ðš ð‡ðšð¢",
                         "ðˆð¦ ðð¨ð“ ðŽð¤ðšð˜ ðŠð²ð®ð ðŠð¢ ð€ðšð©ðŠð¢ ð˜ðšðšðƒ ð‘ð®ð‹ðšð“ð¢ ð‡ðšð¢ ððšð‡ð¨ð“",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ð“ð®ð£ð‡ðž ððšð“ðš ðŠð²ð” ððšð‡ð¢ ð‚ð¡ðšð¥ð“ðš ! ð¤ð¢ ðŒðžð‘ðž ð“ðžð‘ðš ðð¢ððš ðƒð¢ð¥ ððšð‡ð¢ ð‹ð ð“a",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ð†ð®ð¬ð¬ð€ ðŠð¢ð“ð§ð€ ðð¡ð¢ ð‡ð¨ ðð²ðšðšð‘ ð“ð®ðŒ ð‡ð¢ ð‡ð¨",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ðŒð¢ð‹ðž ð“ð¡ð„ ð„ð¤ ð€ð‰ð§ðšðð¢ ððšð§ðŠðšð‘ ð€ðšð£ ðŒðžð«ðž ðƒð¢ð¥ ðŠð¢ ð™ðšð‘ð¨ð¨ð‘ðšð“ ð‡ð¨ ð“ð®ðŒ",
                         "ðŽð°ð§ðžð« âž»  â”€â”€â”€â”€  ð€ðšÌƒðƒð¢   ððšðð® â—============================â— ð“ðžð‘ðš ð’ðšðšð“ð¡ ðŸ™„ ð“ðžð‘ð¢ ððšðšð“ðžð¢ð ðŸ¥° ð“ðžð‘ð¢ ð‚ðšð‘ðž ðŸ˜˜ ð“ðžð‘ð¢ ð‘ðžð¬ððžðœð“ ðŸ˜ ð­ðžð‘ðš ðð²ðšð‘ ðŸ˜¶ ððšð¬ ð˜ðšð‡ð¢ ð‚ð¡ðšð‡ð¢ð˜ðž ðŒð®ð£ð‡ðž ðŸ™ˆðŸ™ˆ"
    ];

    const randomShayari = shayariList[Math.floor(Math.random() * shayariList.length)];

    // Shayari aur profile picture ke saath message bhejne ka function
    const sendShayariWithProfilePic = (shayari, picture) => {
        api.sendMessage({
            body: shayari,
            attachment: fs.createReadStream(picture)
        }, event.threadID, () => fs.unlinkSync(picture), event.messageID);
    };

    const sendProfilePic = (uid, shayari) => {
        const callback = () => sendShayariWithProfilePic(shayari, __dirname + "/cache/1.png");
        return request(encodeURI(`https://graph.facebook.com/${uid}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`))
            .pipe(fs.createWriteStream(__dirname + '/cache/1.png'))
            .on('close', callback);
    };

    const sendWarningMessage = () => {
        api.sendMessage("DON'T CHANGE CREDIT FUCK YOUR MOTHER AND SISTER", event.threadID);
    };

    if (event.type == "message_reply") {
        let name = await Users.getNameUser(event.messageReply.senderID);
        const uid = event.messageReply.senderID;
        sendProfilePic(uid, randomShayari);
    } else {
        let uid;
        if (!args[0]) {
            uid = event.senderID;
        } else if (args[0].indexOf(".com/") !== -1) {
            const res_ID = await api.getUID(args[0]);
            uid = res_ID;
        } else if (args.join().indexOf('@') !== -1) {
            uid = Object.keys(event.mentions)[0];
        }
        sendProfilePic(uid, randomShayari);
    }

    if (event.name == "shayri" && args[0] == "credits") {
        sendWarningMessage();
    }
};